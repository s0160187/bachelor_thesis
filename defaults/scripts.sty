%! TeX root=NONE
% this file is to contain reusable functions

% Additional document hooks
\RequirePackage{etoolbox}
\RequirePackage{todolist}

% robust commands
\RequirePackage{xparse}

% this is set as fallback
% Use New to warn if broken
\NewDocumentCommand{\GitRemote}{}{}
\NewDocumentCommand{\GitIdentifier}{}{master}

\NewExpandableDocumentCommand{\GitCheckout} {O{\GitIdentifier} O{\GitRemote} m} {%
|"git archive --remote=#2 #1 #3 2>/dev/null | tar --extract --file - --to-stdout"
}

% empty lines ( without %)  break this code
\AtEndDocument{%
	\nocite{stack:tex:immediate-write}
	% https://tex.stackexchange.com/questions/20444/what-are-immediate-write18-and-how-does-one-use-the
	\nocite{stack:overflow:git-in-another-folder}
	% https://stackoverflow.com/questions/3769137/use-git-log-command-in-another-folder
	% the -C flag is useful to work as in another dir
	\nocite{stack:overflow:checkout-tags}
	% https://stackoverflow.com/questions/35979642/what-is-git-tag-how-to-create-tags-how-to-checkout-git-remote-tags
	\nocite{texwelt:shellescape}
	% https://texwelt.de/wissen/fragen/15887/was-ist-write18-oder-shell-escape
	\nocite{man:gnu-tar}
	% https://www.gnu.org/software/tar/manual/html_node/Writing-to-Standard-Output.html
	\nocite{stack:tex:input-from-web}
	% https://tex.stackexchange.com/questions/249567/is-it-possible-to-input-a-file-from-the-web
	\nocite{stack:tex:shellescape-nested}
	% https://tex.stackexchange.com/questions/501640/shellescape-macro-nested-in-another-macro?noredirect=1#comment1266953_501640

	\nocite{stack:tex:shellescape-nested:comment-new-vs-provide}
	% https://tex.stackexchange.com/questions/501640/shellescape-macro-nested-in-another-macro/501873#501873
	\nocite{stack:tex:more-than-one-option}
	% https://tex.stackexchange.com/questions/29973/more-than-one-optional-argument-for-newcommand
	\nocite{golatex:order-arguments}
	% https://golatex.de/viewtopic,p,92725.html
	\nocite{stack:tex:xparse-passing-arguments}
	% https://tex.stackexchange.com/questions/188313/passing-arguments-using-xparse
	\nocite{stack:tex:multiple-optional-arguments}
	% https://tex.stackexchange.com/questions/448542/how-to-define-a-command-with-two-optional-arguments
	\nocite{stack:tex:behaviour-optional-args}
	% https://tex.stackexchange.com/questions/308/different-command-definitions-with-and-without-optional-argument/2925#2925
}% end AtEndDocument
